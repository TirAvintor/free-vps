#!/bin/bash

# COLORS - RED THEME
R="\e[1;31m"  # Bright Red
G="\e[1;32m"  # Green
Y="\e[1;33m"  # Yellow
B="\e[1;34m"  # Blue
C="\e[1;36m"  # Cyan
M="\e[1;35m"  # Magenta
W="\e[1;37m"  # White
N="\e[0m"     # Reset

# TIRAVINTOR NETWORK ASCII ART
print_tiravintor_logo() {
    echo -e "\n${B}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${N}"
    echo -e "${B}â•‘${W}   _______ _                 _       _              ${B}â•‘${N}"
    echo -e "${B}â•‘${W}  |__   __(_)      /\       (_)     | |             ${B}â•‘${N}"
    echo -e "${B}â•‘${W}     | |   _ _ __ /  \__   ___ _ __ | |_ ___  _ __  ${B}â•‘${N}"
    echo -e "${B}â•‘${W}     | |  | | '__/ /\ \ \ / / | '_ \| __/ _ \| '__| ${B}â•‘${N}"
    echo -e "${B}â•‘${W}     | |  | | | / ____ \ V /| | | | | || (_) | |    ${B}â•‘${N}"
    echo -e "${B}â•‘${W}     |_|  |_|_|/_/    \_\_/ |_|_| |_|\__\___/|_|    ${B}â•‘${N}"
    echo -e "${B}â•‘${Y}                  N E T W O R K                     ${B}â•‘${N}"
    echo -e "${B}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}"
    echo -e "${Y}                    Made by TirAvintor                       ${N}\n"
}

# NEW UI STYLE FUNCTIONS
print_box() {
    local text="$1"
    local color="$2"
    local width=52
    local padding=$(( (width - ${#text} - 2) / 2 ))
    
    echo -e "${color}â•”$(printf 'â•%.0s' $(seq 1 $((width-2))))â•—${N}"
    printf "${color}â•‘%*s${W}%s${color}%*sâ•‘${N}\n" $padding "" "$text" $((padding - ((${#text} % 2) ? 1 : 0))) ""
    echo -e "${color}â•š$(printf 'â•%.0s' $(seq 1 $((width-2))))â•${N}"
}

print_header() {
    clear
    print_tiravintor_logo
    echo -e "${B}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${N}"
    echo -e "${B}â•‘${W}            DEVELOPMENT MANAGEMENT CONSOLE              ${B}â•‘${N}"
    echo -e "${B}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}\n"
}

print_option() {
    local num="$1"
    local text="$2"
    local color="$3"
    
    echo -e "  ${color}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${N}"
    echo -e "  ${color}â•‘${W}  [${R}$num${W}]  ${Y}$text$(printf '%*s' $((33 - ${#text} - 6)))${color}â•‘${N}"
    echo -e "  ${color}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}\n"
}

print_status() {
    local text="$1"
    local color="$2"
    echo -e "\n${R}â–¶â–¶${color} ${text}${N}\n"
}

print_divider() {
    echo -e "${B}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}"
}

print_footer() {
    echo -e "${B}â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”${N}"
    echo -e "${B}â”‚${W}         TirAvintor Network Â© 2026 - All Rights Reserved${B}â”‚${N}"
    echo -e "${B}â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜${N}\n"
}

# MAIN MENU LOOP
while true; do
    print_header
    
    echo -e "${B}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${N}"
    echo -e "${B}â•‘${Y}                    MAIN OPTIONS                    ${B}â•‘${N}"
    echo -e "${B}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}\n"
    
      print_option "1" "ğŸ”§ Firebase Studio Tool Setup" "$B"
      print_option "2" "âš¡ Firebase Studio VPS Maker" "$B"
      print_option "3" "ğŸŒ VPS (Any + KVM)" "$B"
      print_option "4" "âŒ Exit" "$B"

    
    print_divider
    echo -ne "${R}â–¶â–¶${W} Select Option [${R}1-4${W}] : ${Y}"
    read -p "" op
    echo -ne "${N}"
    
    case $op in
    
    # =========================================================
    # (1) FIREBASE STUDIO TOOL SETUP - ENHANCED WITH TIRAVINTOR THEME
    # =========================================================
    1)
        clear
        print_tiravintor_logo
        print_status "ğŸ”§ FIREBASE STUDIO TOOL SETUP" "$R"
        print_divider
        echo
        
        echo -e "${B}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${N}"
        echo -e "${B}â•‘${W}              FIREBASE STUDIO DEVELOPMENT TOOL SETUP         ${B}â•‘${N}"
        echo -e "${B}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}\n"
        
        echo -e "${Y}ğŸ§¹ Cleaning up old files...${N}"
        sleep 2
        echo -e "${Y}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€${N}"
        
        rm -rf /myapp
        rm -rf /flutter
        
        if [ ! -d ".idx" ]; then
            echo -e "${G}ğŸ“ Creating .idx directory...${N}"
            sleep 2
            echo -e "${Y}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€${N}"
            
            mkdir .idx
            cd .idx
            
            echo -e "${C}ğŸ“ Creating dev.nix configuration...${N}"
            sleep 2
            
            cat <<EOF > dev.nix
{ pkgs, ... }: {
  channel = "stable-24.05";

  packages = with pkgs; [
    unzip
    openssh
    git
    qemu_kvm
    sudo
    cdrkit
    cloud-utils
    qemu
  ];

  env = {
    EDITOR = "nano";
  };

  idx = {
    extensions = [
      "Dart-Code.flutter"
      "Dart-Code.dart-code"
    ];

    workspace = {
      onCreate = { };
      onStart = { };
    };

    previews = {
      enable = false;
    };
  };
}
EOF
            
            clear
            echo -e "${Y}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€${N}"
            echo -e "\n${G}âœ… FIREBASE STUDIO TOOL SETUP COMPLETE!${N}"
            echo -e "${B}â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”${N}"
            echo -e "${B}â”‚${W} ${G}Status${W}   : ${Y}Ready to use${W}                        ${B}â”‚${N}"
            echo -e "${B}â”‚${W} ${G}Location${W} : ${Y}~/.idx${W}                              ${B}â”‚${N}"
            echo -e "${B}â”‚${W} ${G}Tool${W}     : ${Y}Firebase Studio Development Environment ${B}â”‚${N}"
            echo -e "${B}â”‚${W} ${G}Version${W}  : ${Y}Stable 24.05${W}                        ${B}â”‚${N}"
            echo -e "${B}â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜${N}"
        else
            echo -e "${B}â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”${N}"
            echo -e "${B}â”‚${Y} âš  Firebase Studio Tool already setup â€” skipping.        ${B}â”‚${N}"
            echo -e "${B}â”‚${W} Location: ${Y}~/.idx                                    ${B}â”‚${N}"
            echo -e "${B}â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜${N}"
        fi
        
        echo -e "\n${B}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}"
        echo -ne "${R}â–¶â–¶${W} Press Enter to return to main menu...${N}"
        read -p ""
        ;;
    
    # =========================================================
    # (2) FIREBASE STUDIO VPS MAKER â€” ENHANCED WITH TIRAVINTOR THEME
    # =========================================================
    2)
        clear
        print_tiravintor_logo
        print_status "âš¡ FIREBASE STUDIO VPS MAKER" "$R"
        print_divider
        echo
        
        echo -e "${B}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${N}"
        echo -e "${B}â•‘${W}              FIREBASE STUDIO VPS CREATION TOOL              ${B}â•‘${N}"
        echo -e "${B}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}\n"
        
        echo -e "${C}ğŸ“¡ Connecting to GitHub repository...${N}"
        sleep 2
        echo -e "${Y}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€${N}"
        
        echo -e "\n${R}â–¶â–¶${W} Executing Firebase Studio VPS Maker script...${N}"
        sleep 2
        
        bash <(curl -s https://raw.githubusercontent.com/TirAvintor/free-vps/refs/heads/main/vps-idx.sh)
        
        echo -e "\n${B}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}"
        echo -e "${R}â–¶â–¶${W} Firebase Studio VPS Maker execution completed.${N}"
        echo -ne "${R}â–¶â–¶${W} Press Enter to return to main menu...${N}"
        read -p ""
        ;;

    # =========================================================
    # (3) REAL VPS (ANY + KVM)
    # =========================================================
    3)
        clear
        print_tiravintor_logo
        print_status "ğŸŒ VPS (ANY + KVM)" "$R"
        print_divider
        echo

        echo -e "${B}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${N}"
        echo -e "${B}â•‘${W}            VPS DEPLOYMENT MODULE                           ${B}â•‘${N}"
        echo -e "${B}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}\n"

        echo -e "${Y}ğŸ” Running disk & system preparation (dd.sh)...${N}"
        sleep 2
        echo -e "${Y}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€${N}"
        
        bash <(curl -s https://raw.githubusercontent.com/TirAvintor/free-vps/refs/heads/main/running-disk.sh)

        echo -e "\n${G}âœ… Disk preparation completed.${N}\n"
        sleep 2
        echo -e "${Y}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€${N}"

        echo -e "${Y}ğŸš€ Launching VPS installer (vm2.sh)...${N}"
        sleep 2
        echo -e "${Y}â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€${N}"
        
        bash <(curl -s https://raw.githubusercontent.com/TirAvintor/free-vps/refs/heads/main/real-vps.sh)

        echo -e "\n${B}â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}"
        echo -e "${R}â–¶â–¶${W} VPS process finished.${N}"
        echo -ne "${R}â–¶â–¶${W} Press Enter to return to main menu...${N}"
        read -p ""
        ;;

    
    # =========================================================
    # (4) EXIT - ENHANCED WITH TIRAVINTOR THEME
    # =========================================================
    4)
        clear
        print_tiravintor_logo
        echo -e "${B}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${N}"
        echo -e "${B}â•‘${W}                  SESSION TERMINATED                         ${B}â•‘${N}"
        echo -e "${B}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}\n"
        
        echo -e "${B}â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”${N}"
        echo -e "${B}â”‚${W}     Thank you for using TirAvintor Network!            ${B}â”‚${N}"
        echo -e "${B}â”‚${Y}              Made with â¤ï¸ by TirAvintor                ${B}â”‚${N}"
        echo -e "${B}â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜${N}"
        
        echo -e "\n${Y}ğŸ‘‹ Goodbye! Come back soon...${N}\n"
        print_footer
        sleep 2
        exit 0
        ;;
    
    *)
        echo -e "\n${B}â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—${N}"
        echo -e "${B}â•‘${W}                âŒ INVALID OPTION!                           ${B}â•‘${N}"
        echo -e "${B}â•‘${Y}         Please choose between 1-4 only                      ${B}â•‘${N}"
        echo -e "${B}â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•${N}"
        sleep 2
        ;;
    esac
done
